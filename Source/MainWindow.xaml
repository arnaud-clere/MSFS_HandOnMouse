<Window x:Class="HandOnMouse.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:HandOnMouse"
    xmlns:properties="clr-namespace:HandOnMouse.Properties" 
    Title="HandOnMouse" SizeToContent="Height" Width="300"
    WindowStyle="SingleBorderWindow"
    WindowStartupLocation="CenterScreen"
    ResizeMode="CanResizeWithGrip" MinWidth="240" MinHeight="75"
    SizeChanged="Window_SizeChanged"
    MouseDown="Window_MouseDown"
    Closing="Window_Closing" Icon="mouse.ico">
    <Window.Background><SolidColorBrush Color="White"/></Window.Background>
    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
        <Style TargetType="Button">
            <Setter Property="Width" Value="20" />
            <Setter Property="HorizontalAlignment" Value="Center" />
        </Style>
    </Window.Resources>
    <StackPanel x:Name="window" VerticalAlignment="Top" Margin="3">
        <StackPanel Margin="0 3 0 0">
            <TextBlock>Sensitivity (100x res./range)</TextBlock>
            <DockPanel>
                <Button DockPanel.Dock="Right" Margin="3 0 0 0" x:Name="connectButton" Width="100" Background="White" Foreground="DarkGreen" BorderBrush="DarkGreen" Click="Connect_Click">CONNECT FS</Button>
                <ComboBox IsEditable="True"
                    Text="{Binding Source={x:Static properties:Settings.Default}, Path=Sensitivity}">
                    <ComboBoxItem>16</ComboBoxItem>
                    <ComboBoxItem ToolTip="e.g. 800dpi/1in, 1600dpi/2in">8</ComboBoxItem>
                    <ComboBoxItem ToolTip="e.g. 800dpi/2in">4</ComboBoxItem>
                    <ComboBoxItem>2</ComboBoxItem>
                    <ComboBoxItem>1</ComboBoxItem>
                    <ComboBoxItem ToolTip="No mouse input">0</ComboBoxItem>
                </ComboBox>
            </DockPanel>
        </StackPanel>
        <DockPanel>
            <Button DockPanel.Dock="Right" Click="Window_Help">?</Button>
            <Button DockPanel.Dock="Left" Click="Window_File">...</Button>
            <TextBlock Name="MappingsFile" Margin="3,0"
                Text="{Binding Source={x:Static properties:Settings.Default}, Path=MappingFile}"
                Foreground="{Binding StatusBrushForText, UpdateSourceTrigger=PropertyChanged}"/>
        </DockPanel>
        <ItemsControl Height="Auto" ItemsSource="{Binding Mappings}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <DockPanel Margin="0 3 0 0">
                        <Button DockPanel.Dock="Left" Margin="0,0,3,0" Height="20" Width="20"
                                Tag="{Binding}"
                                Click="Axis_Click">...</Button>
                        <TextBlock Width="40" DockPanel.Dock="Left"  TextAlignment="Center"
                                Text="{Binding SimVarMin, UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                        <TextBlock Width="40" DockPanel.Dock="Right" TextAlignment="Center"
                                Text="{Binding SimVarMax, UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="{Binding SimVarNegativeScaleString      , UpdateSourceTrigger=PropertyChanged}"/><!--, StringFormat={}{0:0.##}*}"/>-->
                                <ColumnDefinition Width="{Binding SimVarPositiveScaleString      , UpdateSourceTrigger=PropertyChanged}"/><!--, StringFormat={}{0:0.##}*}"/>-->
                                <ColumnDefinition Width="{Binding SimVarPositiveDetentScaleString, UpdateSourceTrigger=PropertyChanged}"/><!--, StringFormat={}{0:0.##}*}"/>-->
                            </Grid.ColumnDefinitions>
                            <ProgressBar Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" TextBlock.TextAlignment="Left" 
                                Value="{Binding Value, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                ToolTip="{Binding SimVarUnit, UpdateSourceTrigger=PropertyChanged}"
                                Minimum="{Binding SimVarMin, UpdateSourceTrigger=PropertyChanged}" 
                                Maximum="{Binding SimVarMax, UpdateSourceTrigger=PropertyChanged}">
                                <ProgressBar.Foreground><SolidColorBrush Color="White"/></ProgressBar.Foreground>
                                <ProgressBar.Background><SolidColorBrush Color="LightGray"/></ProgressBar.Background>
                            </ProgressBar>
                            <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" TextAlignment="Left" FontWeight="DemiBold"
                                Text="{Binding Text, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                <TextBlock.Foreground>
                                    <SolidColorBrush Color="{Binding ChangeColorForText, UpdateSourceTrigger=PropertyChanged}"/>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <Rectangle Grid.Row="1" Grid.Column="0" 
                                Height="{Binding Source={x:Static properties:Settings.Default}, Path=SimVarScaleHeightInPixels}"
                                Fill="{Binding SimVarNegativeColor}"></Rectangle>
                            <Rectangle Grid.Row="1" Grid.Column="1" 
                                Height="{Binding Source={x:Static properties:Settings.Default}, Path=SimVarScaleHeightInPixels}"
                                Fill="{Binding SimVarPositiveColor}"></Rectangle>
                            <Rectangle Grid.Row="1" Grid.Column="2" 
                                Height="{Binding Source={x:Static properties:Settings.Default}, Path=SimVarScaleHeightInPixels}"
                                Fill="{Binding SimVarPositiveDetentColor}"></Rectangle>
                        </Grid>
                    </DockPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </StackPanel>
</Window>
